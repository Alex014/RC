<?php
//Базовый класс (singleton pattern)
$rc = rc::get_instance();
//------------------------------------------------------------------------------
//  Error reporting
//------------------------------------------------------------------------------
if(get_config('config.DEBUG_MODE')) {
	error_reporting(E_ALL^E_NOTICE^E_WARNING);
	ini_set("display_errors", true);
}
else {
	error_reporting(0);
	ini_set("display_errors", false);
}

//------------------------------------------------------------------------------
//  Database, URL
//------------------------------------------------------------------------------
if(get_config('config.DEVELOPMENT')) {
  rc::$base_url = 'http://rc2.zxc/'; 
  $db = get_config('db.dev');
} else {
  rc::$base_url = 'http://rc2.com/todos/'; 
  $db = get_config('db.real');
}
//------------------------------------------------------------------------------
//  Database, URL
//------------------------------------------------------------------------------

db::connect($db);
db::$connection->exec("SET NAMES ".$db['charset']);
db::start_session();

 //------------------------------------------------------------------------------
//  Regional
//------------------------------------------------------------------------------
load_config("regional", array('default_locale' => 'en'));

//------------------------------------------------------------------------------
//  User
//------------------------------------------------------------------------------
USER::init(new userAdapterDB(new users()));

//------------------------------------------------------------------------------
//  CACHE
//------------------------------------------------------------------------------
CACHE::init('frontend');
//------------------------------------------------------------------------------
//  Front controller
//------------------------------------------------------------------------------
$front = new frontController();
$front->run();
?>